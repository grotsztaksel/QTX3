
# Find all source files
file(GLOB_RECURSE ALL_SRC *.cpp *.h *.hpp)

# Now split these to different source lists: for GTest, QTest and the rest
set(GTEST_MODEL_SRC ${ALL_SRC})
set(QTEST_MODEL_SRC ${ALL_SRC})
set(TEST_MODEL_COMMON_SRC ${ALL_SRC})
list(FILTER GTEST_MODEL_SRC INCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/gtest_")
list(FILTER QTEST_MODEL_SRC INCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/qtest_")
list(FILTER TEST_MODEL_COMMON_SRC EXCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/[qg]test_")

set(TESTED_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR})
string(REGEX REPLACE "/test/" "/src/" TESTED_SRC_DIR ${TESTED_SRC_DIR})

set(GTEST_MODEL_SRC ${GTEST_MODEL_SRC} PARENT_SCOPE)
set(QTEST_MODEL_SRC ${QTEST_MODEL_SRC} PARENT_SCOPE)
set(TEST_MODEL_COMMON_SRC ${TEST_MODEL_COMMON_SRC} PARENT_SCOPE)



