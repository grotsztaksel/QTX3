
# Find all source files
file(GLOB_RECURSE ALL_SRC *.cpp *.h *.hpp)

# Now split these to different source lists: for GTest, QTest and the rest
set(GTEST_UTILS_SRC ${ALL_SRC})
set(QTEST_UTILS_SRC ${ALL_SRC})
set(TEST_UTILS_COMMON_SRC ${ALL_SRC})
list(FILTER GTEST_UTILS_SRC INCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/gtest_")
list(FILTER QTEST_UTILS_SRC INCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/qtest_")
list(FILTER TEST_UTILS_COMMON_SRC EXCLUDE REGEX "^${CMAKE_CURRENT_SOURCE_DIR}/[qg]test_")

set(TESTED_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR})
string(REGEX REPLACE "/test/" "/src/" TESTED_SRC_DIR ${TESTED_SRC_DIR})

set(GTEST_UTILS_SRC ${GTEST_UTILS_SRC} PARENT_SCOPE)
set(QTEST_UTILS_SRC ${QTEST_UTILS_SRC} PARENT_SCOPE)
set(TEST_UTILS_COMMON_SRC ${TEST_UTILS_COMMON_SRC} PARENT_SCOPE)



